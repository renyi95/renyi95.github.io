<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script src="https://cdn.jsdelivr.net/npm/echarts@5.1.1/dist/echarts.min.js"></script><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"obsidianstar.cn",root:"/",images:"/images",scheme:"Pisces",version:"8.3.0",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"/search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!0}}</script><meta name="description" content="插槽，在 React 中没找到？ 在使用 Vue 的时候，插槽是一个特别常用的功能，通过定义插槽，可以在调用组件的时候将外部的内容传入到组件内部，显示到指定的位置。在 Vue 中，插槽分为默认插槽，具名插槽和作用域插槽。其实不仅仅 Vue,在 React 中其实也有类似插槽的功能，只是名字不叫做插槽，下面我将通过举例来说明。  默认插槽现在项目需要开发一个卡片组件，如下图所示，卡片可以指定标题，然"><meta property="og:type" content="article"><meta property="og:title" content="适合 Vue 用户的 React 教程，你值得拥有"><meta property="og:url" content="https://obsidianstar.cn/2020/09/09/react/compare-vue-react/index.html"><meta property="og:site_name" content="Rynes"><meta property="og:description" content="插槽，在 React 中没找到？ 在使用 Vue 的时候，插槽是一个特别常用的功能，通过定义插槽，可以在调用组件的时候将外部的内容传入到组件内部，显示到指定的位置。在 Vue 中，插槽分为默认插槽，具名插槽和作用域插槽。其实不仅仅 Vue,在 React 中其实也有类似插槽的功能，只是名字不叫做插槽，下面我将通过举例来说明。  默认插槽现在项目需要开发一个卡片组件，如下图所示，卡片可以指定标题，然"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-09-08T16:00:00.000Z"><meta property="article:modified_time" content="2023-08-04T10:12:45.746Z"><meta property="article:author" content="Rynes"><meta property="article:tag" content="vue"><meta property="article:tag" content="react"><meta property="article:tag" content="vue3"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://obsidianstar.cn/2020/09/09/react/compare-vue-react/"><script data-pjax class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>适合 Vue 用户的 React 教程，你值得拥有 | Rynes</title><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Rynes</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">313</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">47</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">36</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD%EF%BC%8C%E5%9C%A8-React-%E4%B8%AD%E6%B2%A1%E6%89%BE%E5%88%B0%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">插槽，在 React 中没找到？</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="nav-number">1.1.</span> <span class="nav-text">默认插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.1.1.</span> <span class="nav-text">Vue 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA-card-%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%A6%82%E4%B8%8B%E4%BB%A3%E7%A0%81%E6%89%80%E7%A4%BA"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">实现一个 card 组件，如下代码所示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%A4%96%E9%83%A8%E4%BD%BF%E7%94%A8%E5%AE%9A%E4%B9%89%E7%9A%84-card-%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">在外部使用定义的 card 组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.1.2.</span> <span class="nav-text">React 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-React-%E5%AE%9A%E4%B9%89-Card-%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">使用 React 定义 Card 组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%A4%96%E9%83%A8%E4%BD%BF%E7%94%A8-Card-%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">在外部使用 Card 组件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="nav-number">1.2.</span> <span class="nav-text">具名插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-%E5%AE%9E%E7%8E%B0-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">Vue 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%88%91%E4%BB%AC%E5%B0%B1%E4%B8%8A%E9%9D%A2%E7%9A%84%E9%9C%80%E6%B1%82%E5%AF%B9-card-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">我们就上面的需求对 card 组件进行修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#card-%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9%E5%AE%8C%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E5%86%8D%E5%8E%BB%E8%B0%83%E6%95%B4%E4%B8%80%E4%B8%8B%E4%BD%BF%E7%94%A8-card-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">card 组件修改完之后，我们再去调整一下使用 card 组件的地方</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-%E5%AE%9E%E7%8E%B0-1"><span class="nav-number">1.2.2.</span> <span class="nav-text">React 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E5%8E%9F%E6%9C%89%E7%9A%84-Card-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">对原有的 Card 组件进行修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%99%E6%97%B6%E5%80%99%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%A4%96%E9%83%A8%E8%87%AA%E5%AE%9A%E4%B9%89-title-%E4%BA%86"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">这时候就可以在外部自定义 title 了</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="nav-number">1.3.</span> <span class="nav-text">作用域插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-%E5%AE%9E%E7%8E%B0-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">Vue 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6%EF%BC%8C%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8%E4%BA%86%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">实现用户信息卡片组件，里面使用了作用域插槽</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%A4%96%E9%83%A8%E4%BD%BF%E7%94%A8%E4%BA%BA%E5%91%98%E4%BF%A1%E6%81%AF%E7%BB%84%E4%BB%B6"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">在外部使用人员信息组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-%E5%AE%9E%E7%8E%B0-2"><span class="nav-number">1.3.2.</span> <span class="nav-text">React 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E4%BA%BA%E5%91%98%E4%BF%A1%E6%81%AF%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">实现人员信息卡片组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%A4%96%E9%83%A8%E4%BD%BF%E7%94%A8%E4%BA%BA%E5%91%98%E4%BF%A1%E6%81%AF%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">在外部使用人员信息卡片组件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Context-React-%E4%B8%AD%E7%9A%84-provide-inject"><span class="nav-number">2.</span> <span class="nav-text">Context, React 中的 provide&#x2F;inject</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-%E4%B8%AD%E7%9A%84-provide-inject"><span class="nav-number">2.1.</span> <span class="nav-text">Vue 中的 provide&#x2F;inject</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-App-vue-%E5%86%85%E5%AE%B9%E4%B8%BA%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">2.1.1.</span> <span class="nav-text">修改 App.vue 内容为以下内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E4%BB%BB%E6%84%8F%E5%B1%82%E7%BA%A7%E7%9A%84%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%83%8F%E4%B8%8B%E9%9D%A2%E8%BF%99%E6%A0%B7%E4%BD%BF%E7%94%A8"><span class="nav-number">2.1.2.</span> <span class="nav-text">在任意层级的子组件中像下面这样使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-%E4%B8%AD%E7%9A%84-Context"><span class="nav-number">2.2.</span> <span class="nav-text">React 中的 Context</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E9%A1%B9%E7%9B%AE-src-%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BA-context-%E7%9B%AE%E5%BD%95%EF%BC%8C%E6%B7%BB%E5%8A%A0-MyContext-js-%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">2.2.1.</span> <span class="nav-text">在项目 src 目录下新建 context 目录，添加 MyContext.js 文件，然后添加以下内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%99%E6%97%B6%E5%80%99%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%9C%A8%E6%89%80%E6%9C%89%E7%9A%84%E5%AD%90%E7%BB%84%E4%BB%B6%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%AE%9A%E4%B9%89%E7%9A%84%E4%B8%BB%E9%A2%98-theme-%E4%BA%86"><span class="nav-number">2.2.2.</span> <span class="nav-text">这时候就可以直接在所有的子组件里面使用定义的主题 theme 了</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B2%A1%E6%9C%89%E4%BA%86-v-model-%E4%BD%86%E4%B9%9F%E4%B8%8D%E5%BD%B1%E5%93%8D%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">没有了 v-model,但也不影响使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8-vue-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-model"><span class="nav-number">3.1.</span> <span class="nav-text">在 vue 中使用 v-model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8-react-%E5%AF%BB%E6%89%BE-v-model-%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="nav-number">3.2.</span> <span class="nav-text">在 react 寻找 v-model 替代方案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B2%A1%E6%9C%89%E4%BA%86%E6%8C%87%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">没有了指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#v-show-%E4%B8%8E-v-if"><span class="nav-number">4.1.</span> <span class="nav-text">v-show 与 v-if</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-for"><span class="nav-number">4.2.</span> <span class="nav-text">v-for</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-Vue-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-for"><span class="nav-number">4.2.1.</span> <span class="nav-text">在 Vue 中使用 v-for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-React-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-for-%E7%9A%84%E6%9B%BF%E4%BB%A3%E8%AF%AD%E6%B3%95"><span class="nav-number">4.2.2.</span> <span class="nav-text">在 React 中使用 v-for 的替代语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-bind-%E4%B8%8E-v-on"><span class="nav-number">4.3.</span> <span class="nav-text">v-bind 与 v-on</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-Vue-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-bind-%E4%B8%8E-v-on"><span class="nav-number">4.3.1.</span> <span class="nav-text">在 Vue 中使用 v-bind 与 v-on</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-React-%E4%B8%AD%E5%AF%BB%E6%89%BE%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="nav-number">4.3.2.</span> <span class="nav-text">在 React 中寻找替代方案</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA-CustomInput-%E7%BB%84%E4%BB%B6"><span class="nav-number">4.3.2.1.</span> <span class="nav-text">开发一个 CustomInput 组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-CustomInput-%E7%BB%84%E4%BB%B6"><span class="nav-number">4.3.2.2.</span> <span class="nav-text">使用 CustomInput 组件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE-data%EF%BC%8C%E5%9C%A8-react-%E4%B8%AD%E5%8F%AB-state"><span class="nav-number">5.</span> <span class="nav-text">数据 data，在 react 中叫 state</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue2-0-%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">Vue2.0 中的用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue3-%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-number">5.2.</span> <span class="nav-text">Vue3 中的用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">5.2.1.</span> <span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9"><span class="nav-number">5.2.2.</span> <span class="nav-text">响应数据修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-number">5.2.3.</span> <span class="nav-text">React 中的用法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8-watch-%E7%9B%91%E7%9D%A3%E4%BD%A0%E6%B2%A1%E6%AF%9B%E7%97%85"><span class="nav-number">6.</span> <span class="nav-text">侦听器 watch,监督你没毛病</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue2-0-%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">Vue2.0 中的写法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.1.1.</span> <span class="nav-text">常规实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-watch-%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.1.2.</span> <span class="nav-text">使用 $watch 实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue3-0-%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95"><span class="nav-number">6.2.</span> <span class="nav-text">Vue3.0 中的写法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#watch-%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="nav-number">6.2.1.</span> <span class="nav-text">watch 实现方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#watchEffect-%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.2.2.</span> <span class="nav-text">watchEffect 实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95-1"><span class="nav-number">6.3.</span> <span class="nav-text">React 中的用法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%9C%A8-React-%E4%B8%AD%E6%88%91%E4%B9%9F%E6%89%BE%E5%88%B0%E7%9A%84%E8%B8%AA%E8%BF%B9"><span class="nav-number">7.</span> <span class="nav-text">计算属性，在 React 中我也找到的踪迹</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue2-0-%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95-1"><span class="nav-number">7.1.</span> <span class="nav-text">Vue2.0 中的写法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue3-0-%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95-1"><span class="nav-number">7.2.</span> <span class="nav-text">Vue3.0 中的写法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95"><span class="nav-number">7.3.</span> <span class="nav-text">React 中的写法</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Rynes</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">313</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">36</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">47</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div></div><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://obsidianstar.cn/2020/09/09/react/compare-vue-react/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Rynes"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Rynes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">适合 Vue 用户的 React 教程，你值得拥有</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-09-09 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-09T00:00:00+08:00">2020-09-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="插槽，在-React-中没找到？"><a href="#插槽，在-React-中没找到？" class="headerlink" title="插槽，在 React 中没找到？"></a>插槽，在 React 中没找到？</h1><blockquote><p>在使用 Vue 的时候，插槽是一个特别常用的功能，通过定义插槽，可以在调用组件的时候将外部的内容传入到组件内部，显示到指定的位置。在 Vue 中，插槽分为默认插槽，具名插槽和作用域插槽。其实不仅仅 Vue,在 React 中其实也有类似插槽的功能，只是名字不叫做插槽，下面我将通过举例来说明。</p></blockquote><h2 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h2><p>现在项目需要开发一个卡片组件，如下图所示，卡片可以指定标题，然后卡片内容可以用户自定义，这时候对于卡片内容来说，就可以使用插槽来实现，下面我们就分别使用 Vue 和 React 来实现这个功能</p><h3 id="Vue-实现"><a href="#Vue-实现" class="headerlink" title="Vue 实现"></a>Vue 实现</h3><h4 id="实现一个-card-组件，如下代码所示"><a href="#实现一个-card-组件，如下代码所示" class="headerlink" title="实现一个 card 组件，如下代码所示"></a>实现一个 card 组件，如下代码所示</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card__title&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card__body&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      title: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="在外部使用定义的-card-组件"><a href="#在外部使用定义的-card-组件" class="headerlink" title="在外部使用定义的 card 组件"></a>在外部使用定义的 card 组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>我将被放在card组件的默认插槽里面<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-card</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> MyCard <span class="keyword">from</span> <span class="string">&quot;../components/card&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      MyCard,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="React-实现"><a href="#React-实现" class="headerlink" title="React 实现"></a>React 实现</h3><blockquote><p>虽然在 React 里面没有插槽的概念，但是 React 里面也可以通过 props.children 拿到组件标签内部的子元素的，就像上面代码&lt;my-card&gt;标签内的子元素，通过这个我们也可以实现类似 Vue 默认插槽的功能，一起看看代码。</p></blockquote><h4 id="使用-React-定义-Card-组件"><a href="#使用-React-定义-Card-组件" class="headerlink" title="使用 React 定义 Card 组件"></a>使用 React 定义 Card 组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface CardProps &#123;</span><br><span class="line">  title: string;</span><br><span class="line">  children: React.ReactNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">props: CardProps</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;card&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;card__title&quot;</span>&gt;</span><br><span class="line">        &lt;span&gt;&#123;props.title&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;card__body&quot;</span>&gt;</span><br><span class="line">        &#123;<span class="comment">/**每个组件都可以获取到 props.children。它包含组件的开始标签和结束标签之间的内容 */</span>&#125;</span><br><span class="line">        &#123;props.children&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="在外部使用-Card-组件"><a href="#在外部使用-Card-组件" class="headerlink" title="在外部使用 Card 组件"></a>在外部使用 Card 组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Card <span class="keyword">from</span> <span class="string">&quot;./components/Card&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Card title=<span class="string">&quot;标题&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;我将被放在card组件的body区域内容&lt;/div&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h2><blockquote><p>继续以上面的 Card 组件为例，假如我们现在需求发生了变化，组件的 title 也可以使用插槽，这时候对于 Vue 就可以使用具名插槽了，而 React 也是有办法实现的哦。</p></blockquote><h3 id="Vue-实现-1"><a href="#Vue-实现-1" class="headerlink" title="Vue 实现"></a>Vue 实现</h3><p>Vue 的具名插槽主要解决的是一个组件需要多个插槽的场景，其实现是为<slot>添加 name 属性来实现了。</slot></p><h4 id="我们就上面的需求对-card-组件进行修改"><a href="#我们就上面的需求对-card-组件进行修改" class="headerlink" title="我们就上面的需求对 card 组件进行修改"></a>我们就上面的需求对 card 组件进行修改</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card__title&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--如果传入了title，则使用title属性，否则使用具名插槽--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-else</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card__body&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--对于内容区域依然使用默认插槽--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      title: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="card-组件修改完之后，我们再去调整一下使用-card-组件的地方"><a href="#card-组件修改完之后，我们再去调整一下使用-card-组件的地方" class="headerlink" title="card 组件修改完之后，我们再去调整一下使用 card 组件的地方"></a>card 组件修改完之后，我们再去调整一下使用 card 组件的地方</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-card</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--通过v-slot:title 使用具名插槽--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>这里是标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>我将被放在card组件的默认插槽里面<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-card</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> MyCard <span class="keyword">from</span> <span class="string">&quot;../components/card&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      MyCard,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="React-实现-1"><a href="#React-实现-1" class="headerlink" title="React 实现"></a>React 实现</h3><blockquote><p>React 连插槽都没有， 更别提具名插槽了，但是没有不代表不能模拟出来。对于 React 的 props，我们不仅仅可以传入普通的属性，还可以传入一个函数，这时候我们就可以在传入的这个函数里面返回 JSX,从而就实现了具名插槽的功能。</p></blockquote><h4 id="对原有的-Card-组件进行修改"><a href="#对原有的-Card-组件进行修改" class="headerlink" title="对原有的 Card 组件进行修改"></a>对原有的 Card 组件进行修改</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface CardProps &#123;</span><br><span class="line">  title?: string;</span><br><span class="line">  <span class="comment">// 加入了一个 renderTitle 属性，属性类型是 Function</span></span><br><span class="line">  renderTitle?: <span class="built_in">Function</span>;</span><br><span class="line">  children: React.ReactNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">props: CardProps</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; title, renderTitle &#125; = props;</span><br><span class="line">  <span class="comment">// 如果指定了 renderTtile，则使用 renderTitle,否则使用默认的 title</span></span><br><span class="line">  <span class="keyword">let</span> titleEl = renderTitle ? renderTitle() : <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;card&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;card__title&quot;</span>&gt;&#123;titleEl&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;card__body&quot;</span>&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          /\*_每个组件都可以获取到 props.children。它包含组件的开始标签和结束标签之间的内容 _/</span><br><span class="line">        &#125;</span><br><span class="line">        &#123;props.children&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="这时候就可以在外部自定义-title-了"><a href="#这时候就可以在外部自定义-title-了" class="headerlink" title="这时候就可以在外部自定义 title 了"></a>这时候就可以在外部自定义 title 了</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Card <span class="keyword">from</span> <span class="string">&quot;./components/Card&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Card</span><br><span class="line">        renderTitle=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>我是自定义的标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div&gt;我将被放在 card 组件的 body 区域内容&lt;/div&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h2><blockquote><p>有时让插槽内容能够访问子组件中才有的数据是很有用的，这个就是 Vue 提供作用域插槽的原因。我们继续使用上面的 Card 组件为例，现在我基于上面的卡片组件开发了一个人员信息卡片组件，用户直接使用人员信息卡片组件就可以将人员信息显示到界面中，但是在某些业务模块需要自定义人员信息显示方式，这时候我们就需要使用到作用域插槽了。</p></blockquote><h3 id="Vue-实现-2"><a href="#Vue-实现-2" class="headerlink" title="Vue 实现"></a>Vue 实现</h3><h4 id="实现用户信息卡片组件，里面使用了作用域插槽"><a href="#实现用户信息卡片组件，里面使用了作用域插槽" class="headerlink" title="实现用户信息卡片组件，里面使用了作用域插槽"></a>实现用户信息卡片组件，里面使用了作用域插槽</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">custom-card</span> <span class="attr">title</span>=<span class="string">&quot;人员信息卡片&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--这里使用了作用域插槽，将userInfo传出去了--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;userInfo&quot;</span> <span class="attr">:userInfo</span>=<span class="string">&quot;userInfo&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果没有使用插槽，则显示默认内容--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>姓名: &#123;&#123; userInfo.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>性别: &#123;&#123; userInfo.sex &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>年龄: &#123;&#123; userInfo.age &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">custom-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CustomCard <span class="keyword">from</span> <span class="string">&quot;../card&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      CustomCard,</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        userInfo: &#123;</span><br><span class="line"><span class="javascript">          name: <span class="string">&quot;张三&quot;</span>,</span></span><br><span class="line"><span class="javascript">          sex: <span class="string">&quot;男&quot;</span>,</span></span><br><span class="line">          age: 25,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="在外部使用人员信息组件"><a href="#在外部使用人员信息组件" class="headerlink" title="在外部使用人员信息组件"></a>在外部使用人员信息组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">user-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:userInfo</span>=<span class="string">&quot;&#123; userInfo &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;custom-user&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名: &#123;&#123; userInfo.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄: &#123;&#123; userInfo.age &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user-card</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> UserCard <span class="keyword">from</span> <span class="string">&quot;../components/user-card&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      UserCard,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="React-实现-2"><a href="#React-实现-2" class="headerlink" title="React 实现"></a>React 实现</h3><blockquote><p>在具名插槽那一小节我们通过给组件传入了一个函数，然后在函数中返回 JSX 的方式来模拟了具名插槽，那么对于作用域插槽，我们依然可以使用函数的这种方式，而作用域插槽传递的参数我们可以使用给函数传参的方式来替代</p></blockquote><h4 id="实现人员信息卡片组件"><a href="#实现人员信息卡片组件" class="headerlink" title="实现人员信息卡片组件"></a>实现人员信息卡片组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Card <span class="keyword">from</span> <span class="string">&quot;./Card&quot;</span>;</span><br><span class="line"></span><br><span class="line">interface UserCardProps &#123;</span><br><span class="line">  renderUserInfo?: <span class="built_in">Function</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface UserInfo &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  sex: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">props: UserCardProps</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [userInfo] =</span><br><span class="line">    useState &lt;</span><br><span class="line">    UserInfo &gt;</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      age: <span class="number">25</span>,</span><br><span class="line">      sex: <span class="string">&quot;男&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> content = props.renderUserInfo ? (</span><br><span class="line">    props.renderUserInfo(userInfo)</span><br><span class="line">  ) : (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;姓名: &#123;userInfo.name&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;年龄: &#123;userInfo.age&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;性别: &#123;userInfo.sex&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Card</span> <span class="attr">title</span>=<span class="string">&quot;人员信息&quot;</span>&gt;</span>&#123;content&#125;<span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="在外部使用人员信息卡片组件"><a href="#在外部使用人员信息卡片组件" class="headerlink" title="在外部使用人员信息卡片组件"></a>在外部使用人员信息卡片组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> UserCard, &#123; UserInfo &#125; <span class="keyword">from</span> <span class="string">&quot;./components/UserCard&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;UserCard</span><br><span class="line">        renderUserInfo=&#123;<span class="function">(<span class="params">userInfo: UserInfo</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li&gt;姓名： &#123;userInfo.name&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;&lt;/UserCard&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Context-React-中的-provide-inject"><a href="#Context-React-中的-provide-inject" class="headerlink" title="Context, React 中的 provide/inject"></a>Context, React 中的 provide/inject</h1><blockquote><p>通常我们在项目开发中，对于多组件之间的状态管理，在 Vue 中会使用到 Vuex,在 React 中会使用到 redux 或者 Mobx,但对于小项目来说，使用这些状态管理库就显得比较大材小用了，那么在不使用这些库的情况下，如何去完成数据管理呢？比如面试最常问的祖孙组件通信。在 Vue 中我们可以使用 provide/inject，在 React 中我们可以使用 Context。</p></blockquote><blockquote><p>假设有这样一个场景，系统现在需要提供一个换肤功能，用户可以切换皮肤，现在我们分别使用 Vue 和 React 来实现这个功能。</p></blockquote><h2 id="Vue-中的-provide-inject"><a href="#Vue-中的-provide-inject" class="headerlink" title="Vue 中的 provide/inject"></a>Vue 中的 provide/inject</h2><blockquote><p>在 Vue 中我们可以使用 provide/inject 来实现跨多级组件进行传值，就以上面所说场景为例，我们使用 provide/inject 来实现以下</p></blockquote><h3 id="修改-App-vue-内容为以下内容"><a href="#修改-App-vue-内容为以下内容" class="headerlink" title="修改 App.vue 内容为以下内容"></a>修改 App.vue 内容为以下内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        themeInfo: &#123;</span><br><span class="line"><span class="javascript">          theme: <span class="string">&quot;dark&quot;</span>,</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    provide() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        theme: <span class="built_in">this</span>.themeInfo,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在任意层级的子组件中像下面这样使用"><a href="#在任意层级的子组件中像下面这样使用" class="headerlink" title="在任意层级的子组件中像下面这样使用"></a>在任意层级的子组件中像下面这样使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;`child-$&#123;theme.theme&#125;`&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    inject: [<span class="string">&quot;theme&quot;</span>],</span></span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这样就可以实现 theme 在所有子组件中进行共享了</p><h2 id="React-中的-Context"><a href="#React-中的-Context" class="headerlink" title="React 中的 Context"></a>React 中的 Context</h2><blockquote><p>在 Vue 中我们使用 provide/inject 实现了组件跨层级传值功能，在 React 中也提供了类似的功能即 Context，下面我们使用 Context 来实现相同的功能。</p></blockquote><h3 id="在项目-src-目录下新建-context-目录，添加-MyContext-js-文件，然后添加以下内容"><a href="#在项目-src-目录下新建-context-目录，添加-MyContext-js-文件，然后添加以下内容" class="headerlink" title="在项目 src 目录下新建 context 目录，添加 MyContext.js 文件，然后添加以下内容"></a>在项目 src 目录下新建 context 目录，添加 MyContext.js 文件，然后添加以下内容</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// 定义 MyContext,指定默认的主题为`light`</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MyContext = createContext(&#123;</span><br><span class="line">  theme: <span class="string">&quot;light&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>MyContext 提供了一个 Provider，通过 Provider 可以将 theme 共享到所有的子组件。现在我们在所有的组件的共同父组件比如 App.js 上面添加 MyContext.Provider 将 theme 共享出去</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; MyContext &#125; <span class="keyword">from</span> <span class="string">&quot;@/context/MyContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [theme, setTheme] = useState(<span class="string">&quot;dark&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;MyContext.Provider</span><br><span class="line">      value=&#123;&#123;</span><br><span class="line">        theme,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Children&gt;&lt;/Children&gt;</span><br><span class="line">    &lt;/MyContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="这时候就可以直接在所有的子组件里面使用定义的主题-theme-了"><a href="#这时候就可以直接在所有的子组件里面使用定义的主题-theme-了" class="headerlink" title="这时候就可以直接在所有的子组件里面使用定义的主题 theme 了"></a>这时候就可以直接在所有的子组件里面使用定义的主题 theme 了</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; MyContext &#125; <span class="keyword">from</span> <span class="string">&#x27;@/context/MyContext&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;theme&#125; = useContext(MyContext)</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">child-</span>$&#123;<span class="attr">theme</span>&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="没有了-v-model-但也不影响使用"><a href="#没有了-v-model-但也不影响使用" class="headerlink" title="没有了 v-model,但也不影响使用"></a>没有了 v-model,但也不影响使用</h1><blockquote><p>我们知道 React 和 Vue 都是单向数据流的，即数据的流向都是由外层向内层组件进行传递和更新的，比如下面这段 React 代码就是标准的单向数据流.</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [name] = useState(<span class="string">&quot;子君&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在-vue-中使用-v-model"><a href="#在-vue-中使用-v-model" class="headerlink" title="在 vue 中使用 v-model"></a>在 vue 中使用 v-model</h2><blockquote><p>如上代码，我们在通过通过 value 属性将外部的值传递给了 input 组件，这个就是一个简单的单向数据流。但是在使用 Vue 的时候，还有两个比较特殊的语法糖 v-model 和.sync，这两个语法糖可以让 Vue 组件拥有双向数据绑定的能力，比如下面的代码</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过 v-model,当用户修改 input 的值的时候，外部的 name 的值也将同步被修改。但这是 Vue 的语法糖啊，React 是不支持的，所以 React 应该怎么办呢？这时候再想想自定义 v-model，v-model 实际上是通过定义 value 属性同时监听 input 事件来实现的，比如这样:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;custom-input&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;$_handleChange&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      value: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      $_handleChange(e) &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$emit(<span class="string">&quot;input&quot;</span>, e.target.value);</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="在-react-寻找-v-model-替代方案"><a href="#在-react-寻找-v-model-替代方案" class="headerlink" title="在 react 寻找 v-model 替代方案"></a>在 react 寻找 v-model 替代方案</h2><blockquote><p>同理，React 虽然没有 v-model 语法糖，但是也可以通过传入属性然后监听事件来实现数据的双向绑定。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = useState(<span class="string">&quot;子君&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    setName(e.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input value=&#123;name&#125; onChange=&#123;handleChange&#125;&gt;&lt;/input&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>小编刚开始使用 react，感觉没有 v-model 就显得比较麻烦，不过麻烦归麻烦，代码改写也要写。就像上文代码一样，每一个表单元素都需要监听 onChange 事件，越发显得麻烦了，这时候就可以考虑将多个 onChange 事件合并成一个，比如像下面代码这样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = useState(<span class="string">&quot;子君&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [sex, setSex] = useState(<span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">e: any, method: <span class="built_in">Function</span></span>) =&gt;</span> &#123;</span><br><span class="line">    method(e.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input value=&#123;name&#125; onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> handleChange(e, setName)&#125;&gt;&lt;/input&gt;</span><br><span class="line">      &lt;input value=&#123;sex&#125; onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> handleChange(e, setSex)&#125;&gt;&lt;/input&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="没有了指令"><a href="#没有了指令" class="headerlink" title="没有了指令"></a>没有了指令</h1><p>在 Vue 中我们一般绘制页面都会使用到 template，template 里面提供了大量的指令帮助我们完成业务开发，但是在 React 中使用的是 JSX,并没有指令，那么我们应该怎么做呢？下面我们就将 Vue 中最常用的一些指令转换为 JSX 里面的语法(注意: 在 Vue 中也可以使用 JSX)</p><h2 id="v-show-与-v-if"><a href="#v-show-与-v-if" class="headerlink" title="v-show 与 v-if"></a>v-show 与 v-if</h2><p>在 Vue 中我们隐藏显示元素可以使用 <code>v-show</code> 或者 <code>v-if</code>,当然这两者的使用场景是有所不同的，<code>v-show</code> 是通过设置元素的 display 样式来显示隐藏元素的，而 <code>v-if</code> 隐藏元素是直接将元素从 dom 中移除掉。</p><p>看一下 Vue 中的 <code>v-show</code> 与 <code>v-if</code> 的用法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;showName&quot;</span>&gt;</span>姓名:&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;showDept&quot;</span>&gt;</span>&#123;&#123; dept &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line"><span class="javascript">        dept: <span class="string">&quot;银河帝国&quot;</span>,</span></span><br><span class="line"><span class="javascript">        showName: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">        showDept: <span class="literal">true</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>将 v-show，v-if 转换为 JSX 中的语法</strong><br>在 Vue 中指令是为了在 template 方便动态操作数据而存在的，但是到了 React 中我们写的是 JSX,可以直接使用 JS,所以指令是不需要存在的，那么上面的 v-show,v-if 如何在 JSX 中替代呢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [showName] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [showDept] = useState(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [userInfo] = useState(&#123;</span><br><span class="line">    name: <span class="string">&quot;子君&quot;</span>,</span><br><span class="line">    dept: <span class="string">&quot;银河帝国&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;<span class="comment">/**模拟 v-show \*/</span>&#125;</span><br><span class="line">      &lt;span style=&#123;&#123; <span class="attr">display</span>: showName ? <span class="string">&quot;block&quot;</span> : <span class="string">&quot;none&quot;</span> &#125;&#125;&gt;</span><br><span class="line">        &#123;userInfo.name&#125;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &#123;<span class="comment">/**模拟 v-if \*/</span>&#125;</span><br><span class="line">      &#123;showDept ? <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;userInfo.dept&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> : <span class="literal">undefined</span>&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2><p>v-for 在 Vue 中是用来遍历数据的，同时我们在使用 v-for 的时候需要给元素指定 key，key 的值一般是数据的 id 或者其他唯一且固定的值。不仅在 Vue 中，在 React 中也是存在 key 的，两者的 key 存在的意义基本一致，都是为了优化虚拟 DOM diff 算法而存在的。</p><h3 id="在-Vue-中使用-v-for"><a href="#在-Vue-中使用-v-for" class="headerlink" title="在 Vue 中使用 v-for"></a>在 Vue 中使用 v-for</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        list: [</span><br><span class="line">          &#123;</span><br><span class="line">            id: 1,</span><br><span class="line"><span class="javascript">            name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="javascript">            id: <span class="string">&quot;2&quot;</span>,</span></span><br><span class="line"><span class="javascript">            name: <span class="string">&quot;张三&quot;</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="javascript">            id: <span class="string">&quot;3&quot;</span>,</span></span><br><span class="line"><span class="javascript">            name: <span class="string">&quot;李四&quot;</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在-React-中使用-v-for-的替代语法"><a href="#在-React-中使用-v-for-的替代语法" class="headerlink" title="在 React 中使用 v-for 的替代语法"></a>在 React 中使用 v-for 的替代语法</h3><p>在 react 中虽然没有 v-for，但是 JSX 中可以直接使用 JS,所以我们可以直接遍历数组</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data = [</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      name: <span class="string">&quot;子君&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;data.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="v-bind-与-v-on"><a href="#v-bind-与-v-on" class="headerlink" title="v-bind 与 v-on"></a>v-bind 与 v-on</h2><p>v-bind 在 Vue 中是动态绑定属性的，v-on 是用于监听事件的,因为 React 也有属性和事件的概念，所以我们在 React 也能发现可替代的方式。</p><h3 id="在-Vue-中使用-v-bind-与-v-on"><a href="#在-Vue-中使用-v-bind-与-v-on" class="headerlink" title="在 Vue 中使用 v-bind 与 v-on"></a>在 Vue 中使用 v-bind 与 v-on</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--:value是v-bind:value的简写， @input是v-on:input的简写--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        value: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleInput(e) &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.value = e.target.value;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在-React-中寻找替代方案"><a href="#在-React-中寻找替代方案" class="headerlink" title="在 React 中寻找替代方案"></a>在 React 中寻找替代方案</h3><blockquote><p>在 Vue 中，作者将事件和属性进行了分离，但是在 React 中，其实事件也是属性，所以在本小节我们不仅看一下如何使用属性和事件，再了解一下如何在 React 中自定义事件</p></blockquote><h4 id="开发一个-CustomInput-组件"><a href="#开发一个-CustomInput-组件" class="headerlink" title="开发一个 CustomInput 组件"></a>开发一个 CustomInput 组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface CustomInputProps &#123;</span><br><span class="line">  value: string;</span><br><span class="line">  <span class="comment">//可以看出 onChange是一个普通的函数,也被定义到了组件的props里面了</span></span><br><span class="line">  onChange:</span><br><span class="line">    | (<span class="function">(<span class="params">value: string, event: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> <span class="keyword">void</span>)</span><br><span class="line">    | <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">props: CustomInputProps</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// props.onChange是一个属性，也是自定义的一个事件</span></span><br><span class="line">    props.onChange &amp;&amp; props.onChange(e.target.value, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;props.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用-CustomInput-组件"><a href="#使用-CustomInput-组件" class="headerlink" title="使用 CustomInput 组件"></a>使用 CustomInput 组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CustomInput <span class="keyword">from</span> <span class="string">&quot;./components/CustomInput&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">value: string</span>) </span>&#123;</span><br><span class="line">    setValue(value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;CustomInput value=&#123;value&#125; onChange=&#123;handleChange&#125;&gt;&lt;/CustomInput&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="数据-data，在-react-中叫-state"><a href="#数据-data，在-react-中叫-state" class="headerlink" title="数据 data，在 react 中叫 state"></a>数据 data，在 react 中叫 state</h1><blockquote><p>熟悉 <code>vue</code> 的小伙伴一定对 <code>Vue</code> 中的 <code>data</code> 不会感到陌生的，反正天天写 Bug 的时候都要用，但是对于 <code>data</code> 来说，在 <code>Vue2.0</code>，<code>Vue3.0</code>，React 中用法是不同的，我们下面依次举例说明</p></blockquote><h2 id="Vue2-0-中的用法"><a href="#Vue2-0-中的用法" class="headerlink" title="Vue2.0 中的用法"></a>Vue2.0 中的用法</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line"><span class="javascript">        gzh: <span class="string">&quot;前端有的玩&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过上面的代码我们可以看到 <code>data 是一个函数</code>，然后函数中返回了一个对象，那么为什么 data 是一个函数呢？比如我们有时候也会在 <code>App.vue 文件中看到 data 不是函数</code>的情况。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="javascript">      name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line"><span class="javascript">      sex: <span class="string">&quot;男&quot;</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>那么为什么我们在普通组件里面还要将 data 声明为函数呢？</p><p><code>Vue 官网</code>是这样解释的：<strong>当一个组件被定义，data 必须声明为返回一个初始数据对象的函数，因为组件可能被用来创建多个实例。</strong>如果 <code>data</code> 仍然是一个纯粹的对象，则所有的实例将<em>共享引用</em>同一个数据对象！通过提供 <code>data</code> 函数，每次创建一个新实例后，我们能够调用 <code>data</code> 函数，从而返回初始数据的一个全新副本数据对象。<br>而 <code>App.vue</code> 可以将 <code>data</code> 声明为一个普通对象是因为整个系统中 <code>App.vue</code> <strong><em>只会被使用到一次</em></strong>，所以不存在上述的问题。</p><hr><h2 id="Vue3-中的用法"><a href="#Vue3-中的用法" class="headerlink" title="Vue3 中的用法"></a>Vue3 中的用法</h2><p>在 <code>Vue3</code> 中，我们依然可以像 Vue2 那样去使用 <code>data</code>，当然 <code>Vue3</code> 提供了新的 <code>Composition API</code>，在后续文章中，如果没有特殊说明，我们提到 Vue3 就默认指的是使用 <code>Composition API</code>。<br>在 <code>Composition API</code> 提供了响应式 API，分别是 ref 和 reactive，通过这两个 API 可以生成响应式的数据</p><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名:&#123;&#123; state.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>公众号:&#123;&#123; state.gzh &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>统计:&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; defineComponent, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">&quot;Home&quot;</span>,</span></span><br><span class="line">    setup() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> state = reactive(&#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line"><span class="javascript">        gzh: <span class="string">&quot;前端有的玩&quot;</span>,</span></span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> count = ref(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        state,</span><br><span class="line">        count,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="响应数据修改"><a href="#响应数据修改" class="headerlink" title="响应数据修改"></a>响应数据修改</h3><blockquote><p>在 <code>Vue2.0</code> 中，我们修改 data 的方式一般会使用 <code>this.name = &#39;张三&#39;</code>这种赋值的方式，但是对于 <code>Composition API</code> 中因为提供了两种 api，所以用法稍有区别</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名:&#123;&#123; state.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>公众号:&#123;&#123; state.gzh &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>统计:&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; defineComponent, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line">    setup() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> state = reactive(&#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;子君&quot;</span>,</span></span><br><span class="line"><span class="javascript">        gzh: <span class="string">&quot;前端有的玩&quot;</span>,</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> count = ref(<span class="number">0</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        state.name = <span class="string">&quot;张三&quot;</span>;</span></span><br><span class="line">        count.value++;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        state,</span><br><span class="line">        count,</span><br><span class="line">        handleClick,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>如上代码所示</strong>:</p><ol><li><p>对于 <code>reactive</code> 声明的数据<br>对于 <code>reactive</code>，我们可以通过 <code>state.name</code> 来获取数据，然后通过 <code>state.name=&#39;张三&#39;</code>来修改数据</p></li><li><p>对于 <code>ref</code> 声明的数据<br>对于 <code>ref</code> 声明的数据，<code>ref</code> 接受一个参数值并返回一个响应式且可改变的 <code>ref</code> 对象。<code>ref</code> 对象拥有一个指向内部值的单一属性 .value。所以我们在代码中获取 <code>ref</code> 对象的数据需要使用 <code>count.value</code> 的方式，修改值的方式也需要通过 <code>count.value++</code>的方式。<br>但是这里有一个特殊的点就是在 <code>template</code>，<code>ref</code> 对象会自动解套，意思就是对于<code>&lt;div&gt;统计:&#123;&#123; count &#125;&#125;&lt;/div&gt;</code>,代码里面可以直接使用 count，而不需要写成 <code>count.value</code>，Vue 自己就会将其解套为 <code>count.value</code>。</p></li></ol><h3 id="React-中的用法"><a href="#React-中的用法" class="headerlink" title="React 中的用法"></a>React 中的用法</h3><blockquote><p>React16.8 新增了 Hook 特性，现在许多团队已经大规模使用了，所以本文的内容更多的是以 Hook 为主。<br>在 Vue3.0 中提供了 Composition API,其实这个和 React 的 hook 用法是很相似的，接下来我们将上文中我们写的 Vue3.0 代码修改为 React 版本</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// useState传入要初始化的状态数据，然后会返回一个数组</span></span><br><span class="line">  <span class="comment">// 数组第一项为声明的数据，而第二个参数是一个方法，用于调用</span></span><br><span class="line">  <span class="comment">// 修改数据</span></span><br><span class="line">  <span class="keyword">const</span> [name, setName] = useState(<span class="string">&quot;子君&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [gzh] = useState(<span class="string">&quot;前端有的玩&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在react修改数据需要调用useState返回的方法</span></span><br><span class="line">    setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">      &lt;div&gt;姓名：&#123;name&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;公众号: &#123;gzh&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这段代码中我们使用到了 <code>useState</code> 声明了一个 <code>state</code> 变量，<code>useState</code> 返回的值是一个数组，然后我们通过数组解构获取到了两个变量， <code>const [name, setName] = useState(&#39;子君&#39;)</code>， 其中 <code>name</code> 对应声明的 <code>state</code> 变量，而 <code>setName</code> 是一个函数，调用 setName 可以修改变量的值，比如 <code>setName(&#39;张三&#39;)</code>，这时候 <code>name</code> 的值就会变成了<code>张三</code></p><h1 id="侦听器-watch-监督你没毛病"><a href="#侦听器-watch-监督你没毛病" class="headerlink" title="侦听器 watch,监督你没毛病"></a>侦听器 watch,监督你没毛病</h1><blockquote><p>在平常开发中是比较常用 watch 的，使用 watch 可以去监听数据的变化，然后在变化之后做一系列的操作。比如有一个列表页，我们希望用户在输入搜索关键字的时候，可以自动触发搜索。此时除了监听输入框的 input 事件之外，还可以通过 vue 的 watch 来监听关键字的变化</p></blockquote><h2 id="Vue2-0-中的写法"><a href="#Vue2-0-中的写法" class="headerlink" title="Vue2.0 中的写法"></a>Vue2.0 中的写法</h2><blockquote><p>在 vue2.0 中，watch 常用的写法包含了两种，下面我们分别使用不同的写法来进行上述功能的实现</p></blockquote><h3 id="常规实现"><a href="#常规实现" class="headerlink" title="常规实现"></a>常规实现</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchValue&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--列表，代码省略--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        searchValue: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line"><span class="javascript">      <span class="comment">// 在值发生变化之后，重新加载数据</span></span></span><br><span class="line">      searchValue(newValue, oldValue) &#123;</span><br><span class="line"><span class="javascript">        <span class="comment">// 判断搜索</span></span></span><br><span class="line">        if (newValue !== oldValue) &#123;</span><br><span class="line"><span class="javascript">          <span class="comment">// 在这里处理搜索逻辑</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用-watch-实现"><a href="#使用-watch-实现" class="headerlink" title="使用 $watch 实现"></a>使用 <code>$watch</code> 实现</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchValue&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--列表，代码省略--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        searchValue: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"><span class="javascript">      <span class="comment">// $watch会返回一个unwatch函数，如果需求上需要在某些场景取消watch,可以执行`unwatch`</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> unwatch = <span class="built_in">this</span>.$watch(<span class="string">&quot;searchValue&quot;</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 判断搜索</span></span></span><br><span class="line">        if (newValue !== oldValue) &#123;</span><br><span class="line"><span class="javascript">          <span class="comment">// 在这里处理搜索逻辑</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>在调用<code>$watch</code> 的时候，会有一个返回值 <code>unwatch</code>，然后如果需要取消 <code>watch</code> 监听，我们可以通过调用 <code>unwatch</code> 来进行，比如有一个表单，表单上面的保存按钮平常是置灰的，但是假如用户对表单进行了修改，就需要将表单的置灰状态修改为启用状态。但是如果表单已经启用了，就没必要继续 <code>watch</code> 了，这时候就需要使用 <code>unwatch</code></p><hr><h2 id="Vue3-0-中的写法"><a href="#Vue3-0-中的写法" class="headerlink" title="Vue3.0 中的写法"></a>Vue3.0 中的写法</h2><blockquote><p>在 Vue3.0 中除了 Vue2.0 中的写法外，还在 Composition API 提供了 watch 与 watchEffect 两个 API,用于监听数据的变化，下面我们将上面搜索分别使用 watch 与 watchEffect 来实现</p></blockquote><h3 id="watch-实现方式"><a href="#watch-实现方式" class="headerlink" title="watch 实现方式"></a><code>watch</code> 实现方式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;state.searchValue&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; defineComponent, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line">    setup() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> state = reactive(&#123;</span></span><br><span class="line"><span class="javascript">        searchValue: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      <span class="comment">// 通过watch来监听searchValue的变化</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> unwatch = watch(</span></span><br><span class="line">        () =&gt; state.searchValue,</span><br><span class="line">        (value, oldValue) =&gt; &#123;</span><br><span class="line">          if (value !== oldValue) &#123;</span><br><span class="line"><span class="javascript">            <span class="comment">// 在这里处理搜索逻辑</span></span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        state,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>watch API</code> 与 <code>Vue2.0</code> 中的 <code>this.$watch</code> 用法基本是一致的，包括使用的参数等,同时 <code>watch API</code> 返回了 <code>unwatch</code> 函数用于取消 <code>watch</code><br>同时 <code>watch</code> 还可以侦听多个属性的变化，就像下面这样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch([a, b, c], <span class="function">(<span class="params">[a, b, c], [oldA, oldB, oldC]</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><h3 id="watchEffect-实现"><a href="#watchEffect-实现" class="headerlink" title="watchEffect 实现"></a><code>watchEffect</code> 实现</h3><blockquote><p>watchEffect 参数是一个函数，在代码执行时，会立即执行 watchEffect 传入的函数，然后响应式追踪其依赖，并在其中某些依赖发生变化时重新运行该函数。我们将上述搜索代码使用 watchEffect 来实现</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">      searchValue: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 加载数据</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">loadData</span>(<span class="params">searchValue</span>) </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 通过watchEffect来监听searchValue的变化</span></span><br><span class="line">    <span class="keyword">const</span> unwatch = watchEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 当代码执行到watchEffect时，会立即调用此函数，同时会收集到存在</span></span><br><span class="line">      <span class="comment">//`state.searchValue`的依赖，然后当`state.searchValue`发生</span></span><br><span class="line">      <span class="comment">//变化时会在此调用watchEffect，已实现数据监听</span></span><br><span class="line">      loadData(state.searchValue);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="React-中的用法-1"><a href="#React-中的用法-1" class="headerlink" title="React 中的用法"></a>React 中的用法</h2><blockquote><p>在 React 中与 watch 比较相似的功能是 Effect Hook,使用它可以让你在函数组件中执行副作用操作</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// useState传入要初始化的状态数据，然后会返回一个数组</span></span><br><span class="line">  <span class="comment">// 数组第一项为声明的数据，而第二个参数是一个方法，用于调用</span></span><br><span class="line">  <span class="comment">// 修改数据</span></span><br><span class="line">  <span class="keyword">const</span> [searchValue, setSearchValue] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在react修改数据需要调用useState返回的方法</span></span><br><span class="line">    setSearchValue(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useEffect接受两个参数，第一个是回调函数，第二个是要监听变化的属性，是一个数组</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 当代码首次调用useEffect会进入这个回调函数，然后</span></span><br><span class="line">    <span class="comment">// 当serchValue 发生变化时，会再次进入到这里</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">111</span>);</span><br><span class="line">  &#125;, [searchValue]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input value=&#123;searchValue&#125; onChange=&#123;handleChange&#125;&gt;&lt;/input&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上代码我们使用 <code>useEffect</code> 来监听 <code>searchValue</code> 的变化，然后触发新的逻辑，但是看到上面代码，我们并没有发现<code>取消 effect</code> 的方法，那么如何取消呢？<br><code>useEffect</code> 第二个参数是一个数组，通过给数组传入要监听的变量来实现数据监听，但是却没有办法去取消这个监听，所以我们需要曲线救国，就像下面代码这样</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [isWatch] = useState(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 通过isWatch来判断是否进行监听逻辑变化</span></span><br><span class="line">  <span class="keyword">if</span> (isWatch) &#123;</span><br><span class="line">    <span class="comment">// 监听数据变化</span></span><br><span class="line">    <span class="built_in">console</span>.log(searchValue);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [isWatch, searchValue]);</span><br></pre></td></tr></table></figure><h1 id="计算属性，在-React-中我也找到的踪迹"><a href="#计算属性，在-React-中我也找到的踪迹" class="headerlink" title="计算属性，在 React 中我也找到的踪迹"></a>计算属性，在 React 中我也找到的踪迹</h1><blockquote><p><code>Vue</code> 中的计算属性，相信大家都很熟悉，通常我们会使用计算属性来对 <code>template</code> 中的复杂逻辑计算进行简化，比如许多英文网站输入用户名的时候会输入 <code>firstName</code> 和 <code>lastName</code>，然后在界面上面又会将 <code>firstName</code> 和 <code>lastName</code> 连在一起显示，这时候就可以使用到了计算属性对显示进行处理</p></blockquote><h2 id="Vue2-0-中的写法-1"><a href="#Vue2-0-中的写法-1" class="headerlink" title="Vue2.0 中的写法"></a>Vue2.0 中的写法</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>firstName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>用户名:&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        firstName: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="javascript">        lastName: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      name() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot;·&quot;</span> + <span class="built_in">this</span>.lastName;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Vue3-0-中的写法-1"><a href="#Vue3-0-中的写法-1" class="headerlink" title="Vue3.0 中的写法"></a>Vue3.0 中的写法</h2><p>在 Vue3.0 的 Composition API 也提供了 computed API，用于生成计算属性，用法与 Vue2.0 用法基本是一致的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, defineComponent, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">      firstName: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      lastName: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> name = computed(<span class="function">() =&gt;</span> state.firstName + <span class="string">&quot;·&quot;</span> + state.lastName);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">      name,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="React-中的写法"><a href="#React-中的写法" class="headerlink" title="React 中的写法"></a>React 中的写法</h2><p>在说到在 <code>React</code> 中模拟计算属性之前，我们先要了解一些 <code>React Hook</code> 的规则。</p><p>只能在最顶层使用 <code>Hook</code><br>只能在 <code>React</code> 函数中调用 <code>Hook</code></p><p>当我们在 <code>React</code> 函数中使用 <code>useState</code> 之后，如果我们通过 <code>setState</code> 修改了 <code>state</code>，那么这时候 <code>react</code> <code>会做什么呢？React</code> 会将这个函数式组件重新执行一遍，但是对于里面的 <code>useState</code>，<code>useEffect</code> 等等不会重新初始化，而是使用已经记录的状态进行处理。那么 <code>React</code> 是怎么知道哪个 <code>state</code> 对应哪个 <code>useState</code> 呢？答案是 React 靠的是 Hook 调用的顺序。所以我们不能在非顶层比如 if 里面使用 <code>Hook</code>。<br>同时呢？因为 <code>state</code> 的变化会引起整个函数重新执行，那么假如我们在代码里面写了这样一段逻辑</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [firstName, setFirstName] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> [lastName, setLastName] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> [other, setOther] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 useMemo可以模仿Vue中的计算属性</span></span><br><span class="line"><span class="keyword">const</span> name = firstName + <span class="string">&quot;·&quot;</span> + lastName;</span><br></pre></td></tr></table></figure><p>上面代码里面我们的 name 是通过 firstName 与 lastName 计算而来的，那么当 firstName 或者 lastName 发生变化时，都会重新计算 name，这个逻辑是正确的。但是实际上 other 如果发生了变化,也会导致 name 重新计算，这是我们不愿意看到的。假如 name 的计算逻辑很复杂，那么就会引起不必要的性能开支。所以 React 提供了 useMemo，用于避免非相关属性变化引起计算逻辑发生变化，而我们正好可以利用 useMemo 来模拟计算属性，如下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useMemo, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [firstName, setFirstName] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [lastName, setLastName] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用 useMemo可以模仿Vue中的计算属性,当firstName与`lastName`任何一个发生变化</span></span><br><span class="line">  <span class="comment">//都会触发`name`重新计算，但是对于其他属性变化，并不会引起重新计算</span></span><br><span class="line">  <span class="keyword">const</span> name = useMemo(<span class="function">() =&gt;</span> firstName + <span class="string">&quot;·&quot;</span> + lastName, [firstName, lastName]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = (</span><br><span class="line">    method: <span class="built_in">Function</span>,</span><br><span class="line">    e: React.ChangeEvent&lt;HTMLInputElement&gt;</span><br><span class="line">  ) =&gt; &#123;</span><br><span class="line">    method(e.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;label&gt;firstName&lt;/label&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          value=&#123;firstName&#125;</span><br><span class="line">          onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> handleChange(setFirstName, e)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;label&gt;lastName&lt;/label&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          value=&#123;lastName&#125;</span><br><span class="line">          onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> handleChange(setLastName, e)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;用户名:&#123;name&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是呢，在 Vue 中计算属性既可以 get,也可以 set,这一点我们是无法使用 useMemo 来模拟的</p></div><footer class="post-footer"><div class="reward-container"><div></div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/images/wechat.jpg" alt="Rynes 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="Rynes 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Rynes</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://obsidianstar.cn/2020/09/09/react/compare-vue-react/" title="适合 Vue 用户的 React 教程，你值得拥有">https://obsidianstar.cn/2020/09/09/react/compare-vue-react/</a></li></ul></div><div class="post-tags"><a href="/tags/vue/" rel="tag"><i class="fa fa-tag"></i> vue</a> <a href="/tags/react/" rel="tag"><i class="fa fa-tag"></i> react</a> <a href="/tags/vue3/" rel="tag"><i class="fa fa-tag"></i> vue3</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/09/09/react/lifecycle/" rel="prev" title="React 的生命周期"><i class="fa fa-chevron-left"></i> React 的生命周期</a></div><div class="post-nav-item"><a href="/2020/09/10/react/react-transfer-params/" rel="next" title="React 路由传参的三种方式">React 路由传参的三种方式 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Rynes</span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});</script><script src="/js/local-search.js"></script><script data-pjax>if (document.querySelectorAll('.pdf-container').length) {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/pdfobject@2.2.5/pdfobject.min.js', () => {
    document.querySelectorAll('.pdf-container').forEach(element => {
      PDFObject.embed(element.dataset.target, element, {
        pdfOpenParams: {
          navpanes : 0,
          toolbar  : 0,
          statusbar: 0,
          pagemode : 'thumbs',
          view     : 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height   : element.dataset.height
      });
    });
  }, window.PDFObject);
}</script><script data-pjax>var mermaidElements = document.querySelectorAll('.mermaid');
if (mermaidElements.length) {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js', () => {
    mermaidElements.forEach(element => {
      const newElement = document.createElement('div');
      newElement.innerHTML = element.innerHTML;
      newElement.className = element.className;
      element.parentNode.replaceChild(newElement, element);
    });

    mermaid.init({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    }, '.mermaid');
  }, window.mermaid);
}</script><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="pjax"></div></body></html>